apiVersion: troubleshoot.sh/v1beta2
kind: SupportBundle
metadata:
  name: perfect-app-support-bundle
spec:
  collectors:
    - logs:
        selector:
          - app=nginx
        namespace: default
        limits:
          maxAge: 720h
  analyzers:
    - textAnalyze:
        checkName: App Logs
        fileName: logs.txt
        regexGroups: '(?P<error>error|Error|ERROR)'
        outcomes:
          - pass:
              when: "count == 0"
              message: No errors found in logs
          - warn:
              message: Errors found in logs

