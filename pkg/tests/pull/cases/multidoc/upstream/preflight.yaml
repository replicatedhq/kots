apiVersion: troubleshoot.sh/v1beta2
kind: Preflight
metadata:
  name: test-preflight
spec:
  analyzers:
    - clusterVersion:
      outcomes:
        - fail:
          when: '< repl{{ ConfigOption "min_kubernetes_version" }}'
          message: 'The application requires kubernetes >= repl{{ ConfigOption "min_kubernetes_version" }}'
          ur: https://www.kubernetes.io
        - pass:
          message: Cluster is an up-to-date version
---
apiVersion: troubleshoot.sh/v1beta2
kind: Preflight
metadata:
  name: test-preflight
spec:
  analyzers:
    - containerRuntime:
      outcomes:
        - fail:
          message: 'Did not find repl{{ ConfigOption "container_backend" }} runtime'
        - pass:
          when: '== repl{{ ConfigOption "container_backend" }}'
          message: 'repl{{ ConfigOption "container_backend" }} runtime found'
